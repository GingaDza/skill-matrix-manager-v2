#!/usr/bin/env python3
"""ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆ"""
import os
import sys
import sqlite3
from datetime import datetime

def seed_database(db_path="skill_matrix.db"):
    """åŸºæœ¬ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥"""
    print("ğŸŒ± ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ä¸­...")
    
    with sqlite3.connect(db_path) as conn:
        # 1. åŸºæœ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
        conn.executemany(
            "INSERT INTO users (username, email) VALUES (?, ?)",
            [
                ("admin", "admin@example.com"),
                ("manager", "manager@example.com"),
                ("user1", "user1@example.com"),
                ("user2", "user2@example.com"),
            ]
        )
        print("âœ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸ")

        # 2. ã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆ
        conn.executemany(
            "INSERT INTO groups (name, description) VALUES (?, ?)",
            [
                ("é–‹ç™º", "é–‹ç™ºé–¢é€£ã‚¹ã‚­ãƒ«"),
                ("ã‚¤ãƒ³ãƒ•ãƒ©", "ã‚¤ãƒ³ãƒ•ãƒ©é–¢é€£ã‚¹ã‚­ãƒ«"),
                ("ãƒ“ã‚¸ãƒã‚¹", "ãƒ“ã‚¸ãƒã‚¹é–¢é€£ã‚¹ã‚­ãƒ«"),
            ]
        )
        print("âœ“ ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¾ã—ãŸ")

        # 3. ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ä½œæˆ
        conn.executemany(
            """INSERT INTO categories 
               (name, description, group_id, parent_id, display_order) 
               VALUES (?, ?, ?, ?, ?)""",
            [
                # é–‹ç™ºã‚«ãƒ†ã‚´ãƒªãƒ¼
                ("ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª", "å„ç¨®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª", 1, None, 1),
                ("ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", "å„ç¨®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", 1, None, 2),
                ("Python", "Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", 1, 1, 1),
                ("JavaScript", "JavaScriptãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", 1, 1, 2),
                
                # ã‚¤ãƒ³ãƒ•ãƒ©ã‚«ãƒ†ã‚´ãƒªãƒ¼
                ("ã‚¯ãƒ©ã‚¦ãƒ‰", "ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹", 2, None, 1),
                ("ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯", "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æŠ€è¡“", 2, None, 2),
                ("AWS", "Amazon Web Services", 2, 5, 1),
                ("Azure", "Microsoft Azure", 2, 5, 2),
                
                # ãƒ“ã‚¸ãƒã‚¹ã‚«ãƒ†ã‚´ãƒªãƒ¼
                ("ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ", "ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚¹ã‚­ãƒ«", 3, None, 1),
                ("ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ«", 3, None, 2),
            ]
        )
        print("âœ“ ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸ")

        # 4. ã‚¹ã‚­ãƒ«ã®ä½œæˆ
        conn.executemany(
            """INSERT INTO skills 
               (name, description, category_id, min_level, max_level) 
               VALUES (?, ?, ?, ?, ?)""",
            [
                # Pythonã‚¹ã‚­ãƒ«
                ("PythonåŸºç¤", "Pythonè¨€èªã®åŸºç¤çŸ¥è­˜", 3, 1, 5),
                ("Django", "Djangoãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", 3, 1, 5),
                ("FastAPI", "FastAPIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", 3, 1, 5),
                
                # JavaScriptã‚¹ã‚­ãƒ«
                ("JavaScriptåŸºç¤", "JavaScriptè¨€èªã®åŸºç¤çŸ¥è­˜", 4, 1, 5),
                ("React", "Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", 4, 1, 5),
                ("Vue.js", "Vue.jsãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", 4, 1, 5),
                
                # AWSã‚¹ã‚­ãƒ«
                ("AWS EC2", "EC2ã®é‹ç”¨ç®¡ç†", 7, 1, 5),
                ("AWS Lambda", "Lambdaã®é–‹ç™ºã¨é‹ç”¨", 7, 1, 5),
                
                # Azureã‚¹ã‚­ãƒ«
                ("Azure VM", "Azureä»®æƒ³ãƒã‚·ãƒ³ã®é‹ç”¨", 8, 1, 5),
                ("Azure Functions", "Azure Functionsã®é–‹ç™º", 8, 1, 5),
                
                # ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚¹ã‚­ãƒ«
                ("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†", "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç®¡ç†ã¨é‹å–¶", 9, 1, 5),
                ("ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", "ãƒãƒ¼ãƒ ã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", 9, 1, 5),
                
                # ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ«
                ("ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸", "ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸ã®ä½œæˆ", 10, 1, 5),
                ("ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³", "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ«", 10, 1, 5),
            ]
        )
        print("âœ“ ã‚¹ã‚­ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸ")

        # 5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ã®å‰²ã‚Šå½“ã¦
        conn.executemany(
            "INSERT INTO user_roles (user_id, role_id) VALUES (?, ?)",
            [
                (1, 1),  # admin -> admin
                (2, 2),  # manager -> manager
                (3, 3),  # user1 -> user
                (4, 3),  # user2 -> user
            ]
        )
        print("âœ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ã‚’å‰²ã‚Šå½“ã¦ã¾ã—ãŸ")

        # 6. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚­ãƒ«ã®è¨­å®š
        conn.executemany(
            "INSERT INTO user_skills (user_id, skill_id, level) VALUES (?, ?, ?)",
            [
                # adminã®ã‚¹ã‚­ãƒ«
                (1, 1, 5),  # PythonåŸºç¤
                (1, 2, 4),  # Django
                (1, 7, 4),  # AWS EC2
                
                # managerã®ã‚¹ã‚­ãƒ«
                (2, 11, 5),  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
                (2, 12, 4),  # ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—
                (2, 14, 4),  # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
                
                # user1ã®ã‚¹ã‚­ãƒ«
                (3, 1, 3),  # PythonåŸºç¤
                (3, 4, 3),  # JavaScriptåŸºç¤
                (3, 5, 2),  # React
                
                # user2ã®ã‚¹ã‚­ãƒ«
                (4, 7, 3),  # AWS EC2
                (4, 8, 2),  # AWS Lambda
                (4, 13, 3),  # ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸
            ]
        )
        print("âœ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚­ãƒ«ã‚’è¨­å®šã—ã¾ã—ãŸ")

        conn.commit()
        print("\nâœ¨ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ãŒå®Œäº†ã—ã¾ã—ãŸï¼")

def main():
    try:
        seed_database()
    except Exception as e:
        print(f"âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
